<p id="notice"><%= notice %></p>

<table class="table">
  <thead>
    <tr>
      <th>Name</th>
      <th>Author</th>
      <th>Category</th>
      <th>Availability</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    <% @books.each do |book| %>
      <tr>
        <td><%= book.name %></td>
        <td><%= book.author %></td>
        <td><%= book.category.name %></td>
        <td><%= book.availability %></td>
        <% if can? :update, book %>
          <td><%= link_to 'Show', book %>|
          <%= link_to 'Edit', edit_book_path(book) %>|
          <%#= link_to 'Destroy', book, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <%  elsif can? :read, book  %>
          <td> <%#= link_to "Borrow",book_users_path(:book => book.id), {}, remote: true , method: :post ,  :class => 'btn btn-success btn-xs' %> 
            <button class= "btn btn-success borrow-book" id="<%= book.id %>">
              Borrow
            </button>

          </td> 
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<% if current_user.role == "admin" %>
  <%= link_to 'New Book', new_book_path %>
<% end %>